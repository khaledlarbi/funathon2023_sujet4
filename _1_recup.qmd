##Â 1. RÃ©cupÃ©ration et nettoyage de la base `OpenFoodFacts`

### PrÃ©liminaire (ðŸŸ¡,ðŸŸ¢,ðŸ”µ,ðŸ”´,âš«)

Comme nous allons utiliser frÃ©quemment certains paramÃ¨tres,
une bonne pratique consiste Ã  les stocker dans un fichier
dÃ©diÃ©, au format `YAML` et d'importer celui-ci via
`Python`. Ceci est expliquÃ© dans [ce cours de l'ENSAE](https://ensae-reproductibilite.github.io/website/chapters/application.html#etape-3-gestion-des-param%C3%A8tres)

Nous proposons de crÃ©er le fichier suivant au nom `config.yaml`:

```yaml
URL_OPENFOOD: "https://static.openfoodfacts.org/data/en.openfoodfacts.org.products.csv.gz"
ENDPOINT_S3: "https://minio.lab.sspcloud.fr"
BUCKET: "projet-funathon" # <- âš ï¸ Ligne Ã  changer
DESTINATION_DATA_S3: "/2023/sujet4/diffusion"
```

âš ï¸ Si vous dÃ©sirez pouvoir reproduire tous les exemples de ce fichier, vous devez
changer la variable `BUCKET` pour mettre votre nom d'utilisateur sur le `SSPCloud`.

Nous allons lire ce fichier avec le package adaptÃ© pour transformer ces
instructions en variables `Python` (stockÃ©es dans un dictionnaire)



::: {.cell .markdown}
<!----- boite ðŸŸ¢ ----->

```{=html}
```{python}
#| echo: false
#| output: asis
from utils_notebook import create_box_level
create_box_level(color = "ðŸŸ¢", title = "Utiliser un fichier YAML (ðŸŸ¢)")
```
```

A partir des exemples prÃ©sents dans [cette page](https://stackoverflow.com/questions/1773805/how-can-i-parse-a-yaml-file-in-python),
importer les variables dans un objet `Python` nommÃ© `config`

```{=html}
</div>
```

<!----- end ðŸŸ¢ ----->
:::

::: {.cell .markdown}
<!----- boite ðŸ”µ ----->

```{=html}
```{python}
#| echo: false
#| output: asis
from utils_notebook import create_box_level
create_box_level(color = "ðŸ”µ", title = "Utiliser un fichier YAML (ðŸ”µ)")
```
```

Utiliser le package `PyYAML` pour importer les Ã©lÃ©ments prÃ©sents dans `config.yaml` dans un objet `Python` nommÃ© `config`

```{=html}
</div>
```

<!----- end ðŸ”µ ----->
:::

::: {.cell .markdown}
<!----- boite ðŸ”´,âš« ----->

```{=html}
```{python}
#| echo: false
#| output: asis
from utils_notebook import create_box_level
create_box_level(color = "ðŸ”´", title = "Utiliser un fichier YAML (ðŸ”´,âš«)")
```
```

Importer les Ã©lÃ©ments prÃ©sents dans `config.yaml` dans un objet `Python` nommÃ© `config`

```{=html}
</div>
```

<!----- end ðŸ”µ ----->
:::



```{python}
#| classes: yellow-code

#Â Solution pour voie ðŸŸ¡
import yaml

def import_yaml(filename: str) -> dict:
    """
    Importer un fichier YAML

    Args:
        filename (str): Emplacement du fichier

    Returns:
        dict: Le fichier YAML sous forme de dictionnaire Python
    """
    with open(filename, "r", encoding="utf-8") as stream:
        config = yaml.safe_load(stream)
        return config

import_yaml("config.yaml")
```

###